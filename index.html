<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Login - CitasFree</title>
</head>
<body>
    <h1>Iniciar sesión</h1>
    <form id="loginForm">
        <input type="text" id="alias" placeholder="Alias" required>
        <input type="password" id="pin" placeholder="PIN" required>
        <button type="submit">Entrar</button>
    </form>

    <!-- Primero carga la librería de Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

    <!-- Después tu configuración cliente -->
    <script src="supabaseClient.js"></script>

    <!-- Luego ya tu código de login -->
    <script>
        const form = document.getElementById('loginForm');

        form.onsubmit = async function(e) {
            e.preventDefault();

            const alias = document.getElementById('alias').value;
            const pin = document.getElementById('pin').value;

            const { data, error } = await supabase
                .from('usuarios')
                .select('*')
                .eq('alias', alias)
                .eq('pin', pin)
                .single();

            if (error || !data) {
                alert('Alias o PIN incorrecto.');
            } else {
                sessionStorage.setItem('usuario', JSON.stringify(data));
                window.location.href = 'usuarios.html';
            }
        };
    </script>
</body>
</html>
